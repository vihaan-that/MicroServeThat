<mxfile host="app.diagrams.net" modified="2024-12-04T00:00:00.000Z" agent="MicroServeThat Generator" etag="microservethat-dataflow" version="22.1.0" type="device">
  <diagram name="Data Flow" id="data-flow-diagram">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="MicroServeThat - Data Flow Diagram" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="400" height="40" as="geometry" />
        </mxCell>
        
        <!-- User/Frontend -->
        <mxCell id="user" value="ðŸ‘¤ User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="200" width="40" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="frontend" value="Frontend&#xa;(Next.js)&#xa;Port 3000" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="160" y="200" width="100" height="80" as="geometry" />
        </mxCell>
        
        <!-- API Gateway -->
        <mxCell id="gateway" value="API Gateway&#xa;Port 9000&#xa;&#xa;â€¢ Routing&#xa;â€¢ Auth (JWT)&#xa;â€¢ Circuit Breaker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="320" y="180" width="140" height="120" as="geometry" />
        </mxCell>
        
        <!-- Keycloak -->
        <mxCell id="keycloak" value="ðŸ” Keycloak&#xa;Port 8181&#xa;(OAuth2/JWT)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="320" y="360" width="140" height="70" as="geometry" />
        </mxCell>
        
        <!-- Product Service -->
        <mxCell id="product-svc" value="Product Service&#xa;Port 8080&#xa;&#xa;GET /api/product&#xa;POST /api/product" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="80" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="mongodb" value="MongoDB&#xa;(Products)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="720" y="80" width="80" height="80" as="geometry" />
        </mxCell>
        
        <!-- Order Service -->
        <mxCell id="order-svc" value="Order Service&#xa;Port 8081&#xa;&#xa;POST /api/order" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="200" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="order-mysql" value="MySQL&#xa;(Orders)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="720" y="200" width="80" height="80" as="geometry" />
        </mxCell>
        
        <!-- Inventory Service -->
        <mxCell id="inventory-svc" value="Inventory Service&#xa;Port 8082&#xa;&#xa;GET /api/inventory" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="540" y="340" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="inventory-mysql" value="MySQL&#xa;(Inventory)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="720" y="340" width="80" height="80" as="geometry" />
        </mxCell>
        
        <!-- Kafka -->
        <mxCell id="kafka" value="Apache Kafka&#xa;Topic: order-placed&#xa;(Async Messaging)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="900" y="200" width="140" height="80" as="geometry" />
        </mxCell>
        
        <!-- Notification Service -->
        <mxCell id="notification-svc" value="Notification Service&#xa;Port 8083&#xa;&#xa;Kafka Consumer&#xa;Email Sender" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1100" y="200" width="140" height="100" as="geometry" />
        </mxCell>
        
        <mxCell id="email" value="ðŸ“§ Email&#xa;(SMTP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1280" y="220" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Observability -->
        <mxCell id="observability" value="Observability Stack&#xa;&#xa;Prometheus (Metrics)&#xa;Grafana (Dashboards)&#xa;Tempo (Tracing)&#xa;Loki (Logs)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="900" y="380" width="140" height="100" as="geometry" />
        </mxCell>
        
        <!-- Arrows -->
        <!-- User to Frontend -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;" edge="1" parent="1" source="user" target="frontend">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Frontend to Gateway -->
        <mxCell id="arrow2" value="REST" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;" edge="1" parent="1" source="frontend" target="gateway">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Gateway to Keycloak -->
        <mxCell id="arrow3" value="JWT Validation" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#b85450;dashed=1;" edge="1" parent="1" source="gateway" target="keycloak">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Gateway to Services -->
        <mxCell id="arrow4" value="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="gateway" target="product-svc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow5" value="2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="gateway" target="order-svc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow6" value="3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="gateway" target="inventory-svc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Services to Databases -->
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="product-svc" target="mongodb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="order-svc" target="order-mysql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#d6b656;" edge="1" parent="1" source="inventory-svc" target="inventory-mysql">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Order to Inventory (Sync) -->
        <mxCell id="arrow10" value="SYNC&#xa;Stock Check" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#b85450;fontStyle=1" edge="1" parent="1" source="order-svc" target="inventory-svc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Order to Kafka (Async) -->
        <mxCell id="arrow11" value="ASYNC&#xa;OrderPlacedEvent" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#9673a6;fontStyle=1" edge="1" parent="1" source="order-svc" target="kafka">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Kafka to Notification -->
        <mxCell id="arrow12" value="Consume" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9673a6;" edge="1" parent="1" source="kafka" target="notification-svc">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Notification to Email -->
        <mxCell id="arrow13" value="Send" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="notification-svc" target="email">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- All services to Observability -->
        <mxCell id="arrow14" value="Metrics/Traces/Logs" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#d79b00;dashed=1;" edge="1" parent="1" source="order-svc" target="observability">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="480" width="200" height="140" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Legend" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14" vertex="1" parent="1">
          <mxGeometry x="100" y="485" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend1" value="â†’ Synchronous (REST)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="510" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend2" value="â†’ Asynchronous (Kafka)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="535" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3" value="- - â†’ Auth/Observability" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="560" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend4" value="ðŸ”µ Microservices" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="585" width="150" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
